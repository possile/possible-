<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>üíù Will You Be My Valentine?</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">

<style>
*{
margin:0;
padding:0;
box-sizing:border-box;
font-family:'Poppins',sans-serif;
}

body{
height:100vh;
overflow:hidden;
display:flex;
justify-content:center;
align-items:center;
color:white;
text-align:center;
background:black;
}

/* Animated Background */
body::before{
content:"";
position:fixed;
width:200%;
height:200%;
top:-50%;
left:-50%;
background:
radial-gradient(circle at 20% 30%, #ff4d6d88 0%, transparent 50%),
radial-gradient(circle at 80% 70%, #ff9a9e88 0%, transparent 50%),
radial-gradient(circle at 50% 50%, #fbc2eb88 0%, transparent 50%);
animation:rotateBg 15s linear infinite;
z-index:-1;
filter:blur(12px);
}

@keyframes rotateBg{
0%{transform:rotate(0deg);}
100%{transform:rotate(360deg);}
}

.container{
position:relative;
max-width:90%;
}

h1{
font-size:2.4rem;
margin-bottom:40px;
min-height:70px;
}

/* Buttons */
.buttons{
display:flex;
justify-content:center;
gap:40px;
opacity:0;
transform:scale(.5);
transition:all .6s ease;
}

.pop{
animation:popIn .6s ease forwards;
}

@keyframes popIn{
0%{opacity:0;transform:scale(.5);}
80%{transform:scale(1.1);}
100%{opacity:1;transform:scale(1);}
}

button{
padding:18px 45px;
font-size:20px;
border:none;
border-radius:50px;
cursor:pointer;
transition:all .3s ease;
}

#yesBtn{
background:linear-gradient(135deg,#ff4d6d,#ff9a9e);
color:white;
box-shadow:0 0 25px #ff4d6d;
}

#yesBtn:hover{
transform:scale(1.1);
}

#noBtn{
background:white;
color:#ff4d6d;
}

/* Reveal */
.reveal{
display:none;
animation:fadeIn 1.5s ease forwards;
}

@keyframes fadeIn{
from{opacity:0;transform:scale(.7);}
to{opacity:1;transform:scale(1);}
}

/* Heartbeat Animation */
@keyframes heartbeat{
0%{transform:scale(1);}
25%{transform:scale(1.1);}
40%{transform:scale(1);}
60%{transform:scale(1.15);}
100%{transform:scale(1);}
}

.photo{
width:200px;
height:200px;
border-radius:50%;
object-fit:cover;
margin:25px 0;
border:6px solid white;
box-shadow:0 0 50px rgba(255,255,255,.9);
}

.photo.beat{
animation:heartbeat 1.5s infinite;
}

.poetic-text{
font-size:1.2rem;
line-height:1.8;
margin:20px 0;
min-height:120px;
white-space:pre-line;
}

.footer{
margin-top:20px;
font-style:italic;
}

/* Floating Hearts */
.heart{
position:absolute;
animation:floatUp 5s linear infinite;
}

@keyframes floatUp{
0%{transform:translateY(100vh) scale(.5);opacity:0;}
20%{opacity:1;}
80%{opacity:1;}
100%{transform:translateY(-10vh) scale(1.5);opacity:0;}
}

canvas{
position:fixed;
top:0;
left:0;
pointer-events:none;
}
</style>
</head>
<body>

<audio id="bgMusic" loop>
<source src="music.mp3" type="audio/mpeg">
</audio>

<canvas id="confetti"></canvas>

<div class="container" id="questionBox">
<h1 id="typingQuestion"></h1>

<div class="buttons" id="buttonsWrapper">
<button id="yesBtn">YES üíï</button>
<button id="noBtn">No üò¢</button>
</div>
</div>

<div class="container reveal" id="revealBox">
<h1 id="revealTitle"></h1>
<img id="valentinePhoto" src="default.jpg" class="photo">
<p class="poetic-text" id="typedMessage"></p>
<div class="footer">With love , Immanuel üí´</div>
</div>

<script>

/* ===== GET NAME FROM URL ===== */
const urlParams = new URLSearchParams(window.location.search);
let name = urlParams.get("name");

if (name) {
name = name.charAt(0).toUpperCase() + name.slice(1).toLowerCase();
} else {
name = "My Friend";
}

/* ===== CHANGE PHOTO BASED ON NAME ===== */
const photo = document.getElementById("valentinePhoto");
photo.src = name.toLowerCase() + ".jpg";
photo.onerror = function(){
this.src = "default.jpg";
};

/* ===== ELEMENTS ===== */
const yesBtn = document.getElementById("yesBtn");
const noBtn = document.getElementById("noBtn");
const revealBox = document.getElementById("revealBox");
const questionBox = document.getElementById("questionBox");
const music = document.getElementById("bgMusic");
const typingQuestion = document.getElementById("typingQuestion");
const typedMessage = document.getElementById("typedMessage");
const buttonsWrapper = document.getElementById("buttonsWrapper");
const revealTitle = document.getElementById("revealTitle");

let yesSize = 1;

/* Funny NO Messages */
const funnyMessages = [
"Are you sure? üòè",
"Think again üëÄ",
"Wrong answer üòÇ",
"Try pressing YES instead üíï",
"You can't escape üòé",
"Still no? Brave move üòÜ"
];

/* Typing Function */
function typeText(element, text, speed, callback){
let i = 0;
element.innerHTML = "";
function typing(){
if(i < text.length){
element.innerHTML += text.charAt(i);
i++;
setTimeout(typing, speed);
}else if(callback){
callback();
}
}
typing();
}

/* Intro Question (NO NAME HERE) */
typeText(
typingQuestion,
"Will you be my Valentine? üíù",
80,
()=>{
buttonsWrapper.style.opacity="1";
yesBtn.classList.add("pop");
setTimeout(()=>{ noBtn.classList.add("pop"); },400);
}
);

/* Move NO Button */
function moveNoButton(){

if (navigator.vibrate) {
navigator.vibrate([100,50,100]);
}

const randomMessage = funnyMessages[Math.floor(Math.random()*funnyMessages.length)];
noBtn.innerText = randomMessage;

yesSize += 0.15;
yesBtn.style.transform = `scale(${yesSize})`;

const padding = 20;
const maxX = window.innerWidth - noBtn.offsetWidth - padding;
const maxY = window.innerHeight - noBtn.offsetHeight - padding;

noBtn.style.position = "fixed";
noBtn.style.left = Math.random() * maxX + "px";
noBtn.style.top = Math.random() * maxY + "px";
}

noBtn.addEventListener("mouseenter", moveNoButton);
noBtn.addEventListener("touchstart", function(e){
e.preventDefault();
moveNoButton();
});
noBtn.addEventListener("click", moveNoButton);

/* YES CLICK */
yesBtn.addEventListener("click",()=>{
questionBox.style.display="none";
revealBox.style.display="block";

revealTitle.innerText = `Happy Valentine‚Äôs Day, ${name}! üíñ`;

photo.classList.add("beat");

music.volume=0.7;
music.play();

typeText(
typedMessage,
`So ${name}‚Ä¶ this isn‚Äôt about anything too serious üòä

I just wanted to celebrate the day and show some love.

Whether as friends or just two people enjoying good vibes,
I‚Äôm really glad you‚Äôre in my life.

So being my Valentine today simply means
sharing smiles, laughter, and positive energy üíï`,
40
);

launchConfetti();
});

/* Floating Hearts */
function createHeart(){
const heart=document.createElement("div");
heart.classList.add("heart");
heart.innerHTML=Math.random()>.5?"üíñ":"‚ù§Ô∏è";
heart.style.left=Math.random()*100+"vw";
heart.style.fontSize=(20+Math.random()*30)+"px";
document.body.appendChild(heart);
setTimeout(()=>heart.remove(),5000);
}
setInterval(createHeart,500);

/* Confetti */
const canvas=document.getElementById("confetti");
const ctx=canvas.getContext("2d");
canvas.width=window.innerWidth;
canvas.height=window.innerHeight;

function launchConfetti(){
const particles=[];
for(let i=0;i<250;i++){
particles.push({
x:Math.random()*canvas.width,
y:Math.random()*canvas.height,
size:Math.random()*8+4,
color:`hsl(${Math.random()*360},100%,70%)`,
vx:Math.random()*6-3,
vy:Math.random()*-8-4,
gravity:.2
});
}

function animate(){
ctx.clearRect(0,0,canvas.width,canvas.height);
particles.forEach(p=>{
p.vy+=p.gravity;
p.x+=p.vx;
p.y+=p.vy;
ctx.fillStyle=p.color;
ctx.fillRect(p.x,p.y,p.size,p.size);
});
requestAnimationFrame(animate);
}
animate();
}

</script>
</body>
</html>
